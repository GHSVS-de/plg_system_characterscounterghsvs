(function(t,e){"use strict";"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.VCountdown=e()})(this,function(){"use strict";var t=function(e){if(!(this&&this instanceof t))return new t(e);if(e||(e={}),!e.target)throw"Provide a target to count characters";var s=document.querySelectorAll(e.target);s&&s.length&&(e.target=s[0],this.target=e.target,this.maxChars=e.maxChars||140,this.chopText=e.chopText||!1,this.removeMaxlength=e.removeMaxlength||!1,this.charsTypedLabel=Joomla.JText._(e.charsTypedLabel),this.charsRemainLabel=Joomla.JText._(e.charsRemainLabel),this.charsMaxLabel=Joomla.JText._(e.charsMaxLabel),this.countdown())};return t.prototype={hasClass:function(t,e){return new RegExp("(\\s|^)"+e+"(\\s|$)").test(t.className)},addClass:function(t,e){this.hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},removeClass:function(t,e){this.hasClass(t,e)&&(t.className=t.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))},createEls:function(t,e){var s,a=document.createElement(t);for(s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);return a},insertAfter:function(t,e){t.parentNode.insertBefore(e,t.nextSibling)},update:function(){var t=this.target,e=t.value.length,s=this.maxChars-e;s>10?(this.removeClass(t.nextElementSibling,"warn"),this.removeClass(t.nextElementSibling,"overflow")):s<0?this.addClass(t.nextElementSibling,"overflow"):(this.removeClass(t.nextElementSibling,"overflow"),this.addClass(t.nextElementSibling,"warn"));var a=`\n\t\t\t<span class=chars-typed>${this.charsTypedLabel}${e}</span>\n\t\t\t<span class=chars-remain>${this.charsRemainLabel}${s}</span>\n\t\t\t<span class=chars-max>${this.charsMaxLabel}${this.maxChars}</span>`;t.nextElementSibling.innerHTML=a},deleteMaxlength:function(){console.log("remove maxlength"),this.target.removeAttribute("maxlength")},setMaxChars:function(){this.target.setAttribute("maxlength",this.maxChars)},charsLen:function(){var t=this.createEls("span",{className:"chars-length"});t.innerHTML=this.maxChars,this.insertAfter(this.target,t),this.update()},countdown:function(){this.removeMaxlength&&this.deleteMaxlength(),this.chopText&&this.setMaxChars(),this.charsLen(),this.target.addEventListener("keyup",this.update.bind(this),!1)}},t});