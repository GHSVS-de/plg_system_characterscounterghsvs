(function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.VCountdown=t()})(this,function(){"use strict";var e=function(t){if(!(this&&this instanceof e))return new e(t);if(t||(t={}),!t.target)throw"Provide a target to count characters";var s=document.querySelectorAll(t.target);s&&s.length&&(t.target=s[0],this.target=t.target,this.maxChars=t.maxChars||140,this.chopText=t.chopText||!1,this.removeMaxlength=t.removeMaxlength||!1,this.charsTypedLabel=Joomla.JText._(t.charsTypedLabel),this.countdown())};return e.prototype={hasClass:function(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)},addClass:function(e,t){this.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},removeClass:function(e,t){this.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))},createEls:function(e,t){var s,a=document.createElement(e);for(s in t)t.hasOwnProperty(s)&&(a[s]=t[s]);return a},insertAfter:function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},update:function(){var e=this.target,t=e.value.length,s=this.maxChars-t;s>10?(this.removeClass(e.nextElementSibling,"warn"),this.removeClass(e.nextElementSibling,"overflow")):s<0?this.addClass(e.nextElementSibling,"overflow"):(this.removeClass(e.nextElementSibling,"overflow"),this.addClass(e.nextElementSibling,"warn"));var a=this.charsTypedLabel.replace("{currentCount}",`<span class=chars-typed>${t}</span>`).replace("{maxChars}",`<span class=chars-max>${this.maxChars}</span>`).replace("{remaining}",`<span class=chars-remain>${s}</span>`);e.nextElementSibling.innerHTML=a},deleteMaxlength:function(){console.log("remove maxlength"),this.target.removeAttribute("maxlength")},setMaxChars:function(){this.target.setAttribute("maxlength",this.maxChars)},charsLen:function(){var e=this.createEls("span",{className:"chars-length"});e.innerHTML=this.maxChars,this.insertAfter(this.target,e),this.update()},countdown:function(){this.removeMaxlength&&this.deleteMaxlength(),this.chopText&&this.setMaxChars(),this.charsLen(),this.target.addEventListener("keyup",this.update.bind(this),!1)}},e});